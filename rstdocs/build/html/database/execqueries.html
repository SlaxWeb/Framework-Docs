



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Executing Queries &mdash; SlaxWeb Framework v0.4.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="SlaxWeb Framework v0.4.0" href="../index.html"/>
        <link rel="up" title="Databases" href="index.html"/>
        <link rel="next" title="Query builder" href="querybuilder.html"/>
        <link rel="prev" title="Base Model" href="basemodel.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> SlaxWeb Framework
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/installation.html#preparing-the-environment">Preparing the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/installation.html#install-with-composer">Install with composer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/installation.html#install-from-prepared-packages">Install from prepared packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../overview/firstglance.html">First glance at the framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#root-directory">Root directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#main-application-directory">Main Application directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#bootstrap-directory">Bootstrap directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#documentation-directory">Documentation directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#public-directory">Public directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#composer-files">Composer Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../overview/firstglance.html#autoloader">Autoloader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#urls">URLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/firstglance.html#templating">Templating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../overview/firstglance.html#template-directory">Template directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../overview/firstglance.html#view-directory">View directory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../overview/mvc.html">Model-View-Controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/mvc.html#models">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/mvc.html#views">Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/mvc.html#controllers">Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../overview/architecture.html">Software Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../overview/architecture.html#services-and-properties">Services and Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview/architecture.html#providers">Providers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/webserver.html">Setting up a WebServer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/webserver.html#nginx-php-fpm">Nginx + PHP-FPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/webserver.html#apache-mod-php">Apache + mod_php</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/webserver.html#hiding-index-php-in-the-url">Hiding index.php in the URL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/webserver.html#built-in-php-server">Built-in PHP server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/webserver.html#slaxweb-app-server">SlaxWeb App Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/webserver.html#getting-started-with-docker">Getting started with Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/preparation.html">Prepare the Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/preparation.html#what-are-components">What are components?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/preparation.html#what-we-will-need">What we will need</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/preparation.html#installing-the-components">Installing the components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/routes.html">Routes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/routes.html#route-collection-file">Route collection file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/routes.html#load-the-collection-file">Load the collection file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/routes.html#adding-a-route">Adding a route</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/homepage.html">Home Page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/homepage.html#template-file">Template file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/homepage.html#breaking-up-the-template">Breaking up the template</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/homepage.html#preparing-the-view-classes">Preparing the view classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/homepage.html#rendering-the-view">Rendering the view</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/newslisting.html">News page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/newslisting.html#preparing-the-database">Preparing the database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/newslisting.html#setting-up-the-route">Setting up the route</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/newslisting.html#template-file">Template file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/newslisting.html#view-class">View class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/newslisting.html#model-class">Model class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/newslisting.html#bringing-it-all-together">Bringing it all together</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/singlenews.html">Single news page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/singlenews.html#creating-the-controller">Creating the controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/singlenews.html#create-the-template">Create the template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/singlenews.html#the-route">The Route</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/addnews.html">Add news article</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/addnews.html#setting-up-the-route">Setting up the route</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/addnews.html#template-and-view">Template and View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/addnews.html#saving-the-article">Saving the article</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/editnews.html">Edit news article</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/editnews.html#setting-up-the-route">Setting up the route</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/editnews.html#preparing-the-view">Preparing the View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gettingstarted/editnews.html#preparing-the-controller">Preparing the controller</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gettingstarted/editnews.html#saving-updated-news-article">Saving updated news article</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">General Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/application.html">Application object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/application.html#using-the-application-object">Using the Application object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/application.html#writing-to-application">Writing to Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/application.html#reading-from-application">Reading from Application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/application.html#services">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/application.html#service-providers">Service Providers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/application.html#registering-the-service-provider">Registering the Service Provider</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/routing.html">Routing and URLs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#defining-routes">Defining Routes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#matching-the-uris">Matching the URIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#default-route">Default Route</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#exact-matching-uri">Exact matching URI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#url-contains-uri">URL contains URI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#multiple-uris">Multiple URIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#regular-expressions">Regular Expressions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#handling-http-methods">Handling HTTP Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#route-action">Route Action</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#route-specific-hooks">Route specific hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/routing.html#segment-based-uri-matching">Segment-based URI matching</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/routing.html#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/config.html">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/config.html#configuration-file-structure">Configuration file structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/config.html#loading-configuration-items">Loading configuration items</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/config.html#reading-configuration">Reading configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/components.html">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/components.html#sub-components">Sub-components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/components.html#component-configuration-file">Component configuration file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/components.html#type">Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/components.html#providers">Providers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/components.html#configuration-files">Configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/components.html#id1">Sub-components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/components.html#scripts">Scripts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/slaxer.html">Slaxer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/slaxer.html#component-manipulation">Component manipulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/slaxer.html#install">Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/slaxer.html#upgrade">Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/slaxer.html#remove">Remove</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/slaxer.html#reconfigure">Reconfigure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/slaxer.html#list">List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/slaxer.html#custom-commands">Custom Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/controllers.html">Controllers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/controllers.html#loader">Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/controllers.html#using-the-controller">Using the Controller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/viewtpl.html">Views &amp; Templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/viewtpl.html#the-view">The View</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#loading-the-view">Loading the View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#setting-the-template">Setting the template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#view-data">View data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#rendering-the-template">Rendering the template</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/viewtpl.html#templating">Templating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#sub-views">Sub-Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/viewtpl.html#layouts">Layouts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/response.html">Handling responses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/response.html#response-object-extensions">Response object extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#addcontent">addContent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#redirect">redirect</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/response.html#output-component">Output component</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#output-handlers">Output handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#view-handler">View handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/response.html#json-handler">JSON handler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/model.html">Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/model.html#base-model">Base Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/model.html#writing-a-model">Writing a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/model.html#loader">Loader</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/logger.html">Logger</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/logger.html#using-the-logger">Using the logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/logger.html#configuring-the-logger">Configuring the logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/logger.html#defaultlogger">defaultLogger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/logger.html#logfilepath">logFilePath</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/logger.html#loggersettings">loggerSettings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/logger.html#reserved-loggers">Reserved loggers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/hooks.html">Hooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/hooks.html#writing-hook-points">Writing hook points</a></li>
<li class="toctree-l3"><a class="reference internal" href="../general/hooks.html#writing-hook-definitions">Writing Hook Definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general/hooks.html#register-hook-definitons">Register Hook Definitons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general/hooks.html#multiple-hook-definitions">Multiple Hook Definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../general/hooks.html#framework-hooks-points">Framework hooks points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../general/libraries.html">Libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../general/libraries.html#registering-libraries">Registering libraries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Databases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="config.html#connecting-to-a-database">Connecting to a Database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="config.html#driver">Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html#hostname">Hostname</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html#port">Port</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html#database">Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="config.html#username-password">Username &amp; Password</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="config.html#base-model-settings">Base Model Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="config.html#table-name-guessing">Table name guessing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="basemodel.html">Base Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="basemodel.html#using-the-base-model">Using the Base Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="basemodel.html#using-the-loader">Using the loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="basemodel.html#setting-the-table-name">Setting the table name</a></li>
<li class="toctree-l3"><a class="reference internal" href="basemodel.html#accessing-the-database">Accessing the Database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="basemodel.html#executing-queries">Executing queries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Executing Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-custom-query">Run custom query</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling">Error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-parameters">Query parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sequential-parameter-binding">Sequential parameter binding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#named-parameter-binding">Named parameter binding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fetching-data">Fetching data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reading-results">Reading results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">PDO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="querybuilder.html">Query builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#creating-data">Creating data</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#updating-existing-data">Updating existing data</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#deleting-data">Deleting data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#soft-deletes">Soft deletes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#data-retrieval">Data retrieval</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#where-statements">Where statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#where">where</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#orwhere">orWhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#groupwhere">groupWhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#orgroupwhere">orGroupWhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#nestedwhere">nestedWhere</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#ornestedwhere">orNestedWhere</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#joins">Joins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#join">join</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#joinmodel">joinModel</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#joincond">joinCond</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#orjoincond">orJoinCond</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#joincols">joinCols</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#grouping">Grouping</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#ordering">Ordering</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#limit">Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#timestamps">Timestamps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#enabled">enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#createdcolumn">createdColumn</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#updatedcolumn">updatedColumn</a></li>
<li class="toctree-l4"><a class="reference internal" href="querybuilder.html#function">function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="querybuilder.html#sql-functions">SQL functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../components/bootstrap.html">Bootstrap Component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../components/bootstrap.html#application">Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/bootstrap.html#hooks">Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../components/bootstrap.html#registering-additional-providers">Registering Additional Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/bootstrap.html#class-reference">Class reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../components/config.html">Config Component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../components/config.html#handler">Handler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/config.html#prepending-configuration-item-names">Prepending configuration item names</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/config.html#specific-handlers">Specific Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/config.html#custom-handlers">Custom Handlers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../components/router.html">Router Component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#route">Route</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/router.html#uri">URI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/router.html#method">Method</a></li>
<li class="toctree-l4"><a class="reference internal" href="../components/router.html#action">Action</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#container">Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#dispatcher">Dispatcher</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/router.html#hooks">Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#response">Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#route-collections">Route Collections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../components/router.html#adding-a-route">Adding a route</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#services">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/router.html#class-reference">Class reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="/Framework-Docs/classmap/annotated.html#http://">Class Map</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">SlaxWeb Framework</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Databases</a> &raquo;</li>
      
    <li>Executing Queries</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/database/execqueries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="executing-queries">
<span id="database-execqueries"></span><h1>Executing Queries<a class="headerlink" href="#executing-queries" title="Permalink to this headline">¶</a></h1>
<p>While the Database Library provides a <a class="reference internal" href="querybuilder.html#database-querybuilder"><span class="std std-ref">Query builder</span></a>, it also provides
functionality to execute hand written queries.</p>
<p>The Database Library is available in the <a class="reference internal" href="../general/application.html#gen-topics-application"><span class="std std-ref">Application object</span></a> under the
name <strong>databaseLibrary.service</strong>, or if you are using the <a class="reference internal" href="basemodel.html#database-basemodel"><span class="std std-ref">Base Model</span></a>,
you can access it with the <strong>$db</strong> protected property.</p>
<div class="section" id="run-custom-query">
<h2>Run custom query<a class="headerlink" href="#run-custom-query" title="Permalink to this headline">¶</a></h2>
<p>To execute a custom query, the Database Library provides the <strong>execute</strong> method
for this purpose:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO table VALUES (&#39;val&#39;)&quot;</span><span class="p">);</span>
<span class="c1">// code ...</span>
</pre></div>
</div>
<p>The <strong>execute</strong> method will return a <em>bool</em> true value if the query was executed
successfully, and a <em>bool</em> false value if the query execution resulted in an error.</p>
</div>
<div class="section" id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h2>
<p>When an error occurs in execution of the query, the Database Library sets an error
object to its internal <em>$error</em> protected property. To obtain the error <strong>lastError</strong>
method is available in the Database Library which returns the Database Error object.
The Error object contains the error message and the executed query, both accessible
as properties <em>message</em> and <em>query</em>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s2">&quot;erroneous query&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$error</span> <span class="o">=</span> <span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">lastError</span><span class="p">();</span>
    <span class="nv">$log</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span><span class="s2">&quot;Error occurred&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;message&quot;</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">]);</span>
<span class="p">}</span>
<span class="c1">// code ...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Error object will contain more error data in the future. Nothing has yet been
decided in this field, and suggestions are accepted.</p>
</div>
</div>
<div class="section" id="query-parameters">
<h2>Query parameters<a class="headerlink" href="#query-parameters" title="Permalink to this headline">¶</a></h2>
<p>When you are going to execute a query with parameters from an external origin, it
is recommended that you bind them to the query, instead of concatenating them directly
into the string that represents your query for higher security. To do this, the
<strong>execute</strong> method accepts an array of parameters as the second parameter, all you
need to do is mark where you wish to bind the parameters.</p>
<div class="section" id="sequential-parameter-binding">
<h3>Sequential parameter binding<a class="headerlink" href="#sequential-parameter-binding" title="Permalink to this headline">¶</a></h3>
<p>With sequential parameter binding the parameters are bound to the query in the order
that they are found in the array of parameters. The question mark <em>(?)</em> is used
in the query to mark where a parameter will be bound. The first parameter from the
array will be bound to the first question mark:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span>
    <span class="s2">&quot;SELECT col1 FROM table WHERE col2 = ? AND col3 = ?&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;col2 value&quot;</span><span class="p">,</span> <span class="s2">&quot;col3 value&quot;</span><span class="p">]</span>
<span class="p">);</span>
<span class="c1">// code ...</span>
</pre></div>
</div>
<p>The above piececode ... will execute the following query:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">col1</span> <span class="k">FROM</span> <span class="k">table</span> <span class="k">WHERE</span> <span class="n">col2</span> <span class="o">=</span> <span class="s1">&#39;col2 value&#39;</span> <span class="k">AND</span> <span class="n">col3</span> <span class="o">=</span> <span class="s1">&#39;col3 value&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="named-parameter-binding">
<h3>Named parameter binding<a class="headerlink" href="#named-parameter-binding" title="Permalink to this headline">¶</a></h3>
<p>The named parameters are similar to sequential parameters, only that they have a
name, and can be reused multiple times in the query, without specifying it multiple
times in the array. However, the array has to be associative, where the key is the
name of the bind, and the value is the value of the parameter.</p>
<p>The parameter name must be prepended by a colon <em>(:)</em>, and it must be so in the
query, as in the associative array:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span>
    <span class="s2">&quot;SELECT col1 FROM table WHERE col2 = :param OR col3 = :param&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;:param&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;value&quot;</span><span class="p">]</span>
<span class="p">);</span>
<span class="c1">// code ...</span>
</pre></div>
</div>
<p>As you can see, the above example reuses the <em>:param</em> parameter twice, and the array
contains it only once. The above example will execute the following example:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">col1</span> <span class="k">FROM</span> <span class="k">table</span> <span class="k">WHERE</span> <span class="n">col2</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span> <span class="k">or</span> <span class="n">col3</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fetching-data">
<span id="database-execqueries-fetchdata"></span><h2>Fetching data<a class="headerlink" href="#fetching-data" title="Permalink to this headline">¶</a></h2>
<p>When you wish to retrieve data from the database, you execute the query normally
with the <strong>execute</strong> method, and upon successful execution, the <strong>fetch</strong> method
can be ran to obtain the <strong>Result</strong> object:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a query has not yet been ran or did not yield a valid result set, an Exception
will be thrown.</p>
</div>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre> <span class="o">&lt;?</span><span class="nx">php</span>
 <span class="c1">// code ...</span>
 <span class="k">if</span> <span class="p">(</span><span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s2">&quot;SELECT col1, col2, col3 FROM table&quot;</span><span class="p">))</span> <span class="p">{</span>
     <span class="k">try</span> <span class="p">{</span>
         <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">();</span>
     <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">// handle error</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="reading-results">
<h3>Reading results<a class="headerlink" href="#reading-results" title="Permalink to this headline">¶</a></h3>
<p>There are multiple ways to read data from the <strong>Result</strong> object. The <strong>getResults</strong>
method will return the raw <a class="reference external" href="http://www.php.net/pdo">PDO</a> data array for you to
manipulate further.</p>
<div class="section" id="iterating-rows">
<h4>Iterating rows<a class="headerlink" href="#iterating-rows" title="Permalink to this headline">¶</a></h4>
<p>Further methods to obtain data require you to iterate rows. To do so the <strong>Result</strong>
object provides the following methods:</p>
<ul class="simple">
<li><em>next</em></li>
<li><em>prev</em></li>
<li><em>row</em></li>
</ul>
<p>The <strong>next</strong> method will move the internal pointer to the next row in the result
set.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <strong>next</strong> method has to be called before data can be accessed, as the pointer
does not point to a valid row when the <strong>Result</strong> object is instantiated.</p>
</div>
<p>The <strong>prev</strong> method will move the internal pointer to the previous row in the result
set.</p>
<p>The <strong>row</strong> method will set the internal pointer to the desired row, as it requires
the row number as input.</p>
<p>All of the above return a <em>bool</em> success status. Bellow examples show how you can
use them in practice. For this example we assume we have a result set of 5 rows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$dbLib</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">();</span> <span class="c1">// current row: 0, invalid row</span>
<span class="nv">$result</span><span class="o">-&gt;</span><span class="na">next</span><span class="p">();</span> <span class="c1">// current row: 1, return value: true</span>
<span class="nv">$result</span><span class="o">-&gt;</span><span class="na">prev</span><span class="p">();</span> <span class="c1">// current row: 1, return value: false</span>
<span class="nv">$result</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// current row: 4, return value: true</span>
<span class="nv">$result</span><span class="o">-&gt;</span><span class="na">prev</span><span class="p">();</span> <span class="c1">// current row: 3, return value: true</span>
<span class="c1">// code ...</span>
</pre></div>
</div>
<p>The <strong>Result</strong> object also provides the <strong>rowCount</strong> method that returns the number
of rows in the result set.</p>
</div>
<div class="section" id="getting-row-data">
<h4>Getting row data<a class="headerlink" href="#getting-row-data" title="Permalink to this headline">¶</a></h4>
<p>When the pointer is set to a valid row the whole row from the result set can be
obtained with the <strong>get</strong> method. The <strong>get</strong> method returns the row object, where
all the columns are accessible as properties. The bellow example continues from
the <a class="reference internal" href="#database-execqueries-fetchdata"><span class="std std-ref">Fetching data</span></a> example:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">next</span><span class="p">()</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// handle error</span>
     <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="nv">$row</span> <span class="o">=</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>
 <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="o">-&gt;</span><span class="na">col1</span> <span class="o">===</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// handle scenario</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The <strong>Result</strong> object also provides a magic get method that will automatically read
the column value from the current row in the result set, so you do not need to obtain
the row with <strong>get</strong> first. Continuing from above example:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>18
19
20</pre></div></td><td class="code"><div class="highlight"><pre> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">col2</span> <span class="o">===</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// handle scenario</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Both above methods may throw a <strong>\SlaxWeb\Database\Exception\RowNotFoundException</strong>
if the pointer is not set to a valid row in the result set. Additionaly the magic
get method will throw a <strong>\SlaxWeb\Database\Exception\ColumnNotFoundException</strong>
if the requested column is not found in the current row in the result set.</p>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>PDO<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>If direct access to the <a class="reference external" href="http://www.php.net/pdo">PDO</a> object is required, you can
obtain it from the <a class="reference internal" href="../general/application.html#gen-topics-application"><span class="std std-ref">Application object</span></a> under the name <strong>pdo.service</strong>
protected service definition:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// code ...</span>
<span class="nv">$pdo</span> <span class="o">=</span> <span class="nv">$app</span><span class="p">[</span><span class="s2">&quot;pdo.service&quot;</span><span class="p">]();</span>
<span class="c1">/// code ...</span>
</pre></div>
</div>
<p>However, this documentation does not cover the documentation for PDO, as it is already
freely available on the PHP website <a class="reference external" href="http://www.php.net/pdo">http://www.php.net/pdo</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="querybuilder.html" class="btn btn-neutral float-right" title="Query builder" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="basemodel.html" class="btn btn-neutral" title="Base Model" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, SlaxWeb Dev Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>